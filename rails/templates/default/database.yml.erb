<% (['development', 'staging', 'production', 'peoplesoft', 'donor'] + [@environment]).uniq.each do |env| -%>
<%= env %>:
  adapter: <%= @database[:adapter].to_s.inspect %>
  database: <%= @database[:database].to_s.inspect %>
  encoding: <%= (@database[:encoding] || 'utf8').to_s.inspect %>
  host: <%= (@database[:host] || 'localhost').to_s.inspect %>
  username: <%= @database[:username].to_s.inspect %>
  password: <%= @database[:password].to_s.inspect %>
  reconnect: <%= @database[:reconnect].nil? ? 'true' : @database[:reconnect] %>
  pool: <%= @database[:pool] || 25 %>

<% end %>

<% if @uscm %>
uscm:
  adapter: <%= @uscm[:adapter].to_s.inspect %>
  database: <%= @uscm[:database].to_s.inspect %>
  encoding: <%= (@uscm[:encoding] || 'utf8').to_s.inspect %>
  host: <%= (@uscm[:host] || 'localhost').to_s.inspect %>
  username: <%= @uscm[:username].to_s.inspect %>
  password: <%= @uscm[:password].to_s.inspect %>
  reconnect: <%= @database[:reconnect].nil? ? 'true' : @database[:reconnect] %>

<% else %>

uscm:
  adapter: <%= @database[:adapter].to_s.inspect %>
  database: <%= @database[:database].to_s.inspect %>
  encoding: <%= (@database[:encoding] || 'utf8').to_s.inspect %>
  host: <%= (@database[:host] || 'localhost').to_s.inspect %>
  username: <%= @database[:username].to_s.inspect %>
  password: <%= @database[:password].to_s.inspect %>
  reconnect: <%= @database[:reconnect].nil? ? 'true' : @database[:reconnect] %>
  pool: <%= @database[:pool] || 30 %>

<% end %>

<% if @simpd %>
simpd:
  adapter: <%= @simpd[:adapter].to_s.inspect %>
  database: <%= @simpd[:database].to_s.inspect %>
  encoding: <%= (@simpd[:encoding] || 'utf8').to_s.inspect %>
  host: <%= (@simpd[:host] || 'localhost').to_s.inspect %>
  username: <%= @simpd[:username].to_s.inspect %>
  password: <%= @simpd[:password].to_s.inspect %>
  reconnect: <%= @simpd[:reconnect].nil? ? 'true' : @simpd[:reconnect] %>

<% else %>

simpd:
  adapter: <%= @database[:adapter].to_s.inspect %>
  database: <%= @database[:database].to_s.inspect %>
  encoding: <%= (@database[:encoding] || 'utf8').to_s.inspect %>
  host: <%= (@database[:host] || 'localhost').to_s.inspect %>
  username: <%= @database[:username].to_s.inspect %>
  password: <%= @database[:password].to_s.inspect %>
  reconnect: <%= @database[:reconnect].nil? ? 'true' : @database[:reconnect] %>
  pool: <%= @database[:pool] || 30 %>

<% end %>
